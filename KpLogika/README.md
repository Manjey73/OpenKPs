Драйвер приборов ЗАО НПФ Логика

пока тестовый вариант, только сборка, без исходников

Принцип работы драйвера основан на расчете адресов переменных приборов Логика.
Сортировке адресов и чтение групповыми запросами страниц памяти Flash или Ram.
Параметры типа V считываются отдельно из Flash и отдельно из Ram, переменные типа Объема необходимо складывать самостоятельно.

При настройке приборов с протоколом СП Сеть через порт RS232 
Параметрs шаблона 
DevTemplate/Address = "false" или "no" (кавычки не вводятся) - Адрес прибора будет равен 128(dec) + Адрес прибора из БД Scada
При работе по RS485 в данном параметре задается собственный адрес сервера (целочисленное)

DevTemplate/readLastErr = "false"  запрещает выполнять очередные запросы при ошибке, "true" - выполняет следующие запросы шаблона.
Данная команда не работает в режиме шины RSbus, в ней при ошибке остальные запросы сессии прерываются.

DevTemplate/parDescrUse = "true" создаст имена Тегов с учетом описания параметра ParDescr + ParName, = "false" создаст имена тегов только по параметру ParName

ObjGroup/ObjName - является именем меню, создавая разные имена, создаются разные меню в окне КП Коммуникатора (одинаковые имена группируются в группы меню)

Групировка внутри меню выполняется так же по номеру сигнала ObjVal/Signal - номер сигнала указывается в БД Входных каналов

Принцип работы драйвера основан на расчете адресов переменных приборов Логика.
Сортировке адресов и чтение групповыми запросами страниц памяти Flash или Ram.
Параметры типа V считываются отдельно из Flash и отдельно из Ram, переменные типа Объема необходимо складывать самостоятельно.

Исправлена ошибка при одновременных переменных ТО, ДО, представляющих время и дату и числовых переменных

Добавлена возможность читать текущие дату, время или дату и время в одну переменную.
Смотрите пример в файле шаблоне Logica_SPT943_example.xml (просто тестовый шаблон)

Параметр ValType теперь имеет несколько значений

«double»
«string»
«float»
«byte»
«byte3» — указание считать 3 байта, отдельно для времени или даты — ValFormat тут или «time» или «date»
«byte6» — указание считать 6 байт сразу время и дату, требуется указать ValFormat = «datetime»
«Int16» или «int16»
«Int32» или «int32»
для параметров ТО и ДО «time» и «date»

Так же добавился параметр ValFormat
Если параметры ТО и ДО то это описание формата времени или даты
Если это чтение Нештатных ситуаций или другого числового значения можно применить «bin» или «hex» для отображения в окне лога Опроса КП в бинарном или 16-м представлении. в HEX число отображается так, как в Калькуляторе Windows, то есть младшие байты справа.

Шаблоны Logica_SPT943_1.xml и Logica_SPT943_2.xml соответственно для варианта c одним и двумя трубопроводами

Чтения архивов и команд пока так же нет. Исходники все так же с мусором, но в принципе в данном варианте могу почистить и выложить. Все добавления в основном относились к RSbus.
Надеюсь, что часть SPbus не сломал.

p.s.
Некоторые параметры не участвуют в драйвере, может со временем будут, а может быть нет. Например poolTime пока нигде не участвует.
